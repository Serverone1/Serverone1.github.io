!function(e){"use strict";var t=sessionStorage;e.cache={save:function(e,n){t&&t.setItem("FACIL-ITI_"+e,n)},load:function(e){return t&&t.getItem("FACIL-ITI_"+e)}}}(FACIL_ITI),function(e,t,n){"use strict";n.compat={check:function(){var o=!0;return o=(o=(o=(o=(o=(o=o&&"function"==typeof n.compat.jsonParse)&&"function"==typeof n.compat.jsonStringify)&&"function"==typeof n.compat.addEvent)&&"function"==typeof e.postMessage)&&"function"==typeof t.querySelector)&&"function"==typeof t.querySelectorAll},selectAll:function(e){return t.querySelectorAll(e)},select:function(e){return t.querySelector(e)},jsonParse:function(e){return JSON&&JSON.parse?JSON.parse(e):JSON&&JSON.decode?JSON.decode(e):void 0},jsonStringify:function(e){var t=null,n="";return"object"==typeof Prototype&&"function"==typeof Array.prototype.toJSON&&(t=Array.prototype.toJSON,Array.prototype.toJSON=null),JSON&&JSON.stringify?n=JSON.stringify(e):JSON&&JSON.encode&&(n=JSON.encode(e)),"function"==typeof t&&(Array.prototype.toJSON=t),n},addEvent:function(t,n,o){return"function"==typeof e.addEventListener?(t.addEventListener(n,o,!1),!0):e.attachEvent?(t.attachEvent("on"+n,o),!0):void 0},setAttributesList:function(e,t){var n;for(n in t)e.setAttribute(n,t[n])}}}(window,document,FACIL_ITI),function(e,t){"use strict";var n=function(){var e,t,n,o=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)n=1&n?3988292384^n>>>1:n>>>1;o[e]=n}return function(e){var t,n=-1;for(t=0;t<e.length;t++)n=n>>>8^o[255&(n^e.charCodeAt(t))];return(-1^n)>>>0}}();function o(e){var t,n=[];if(e.href&&n.push(e.href),"cssRules"in e)try{for(t=0;t<e.cssRules.length;t++)e.cssRules[t]instanceof CSSImportRule&&e.cssRules[t].styleSheet&&(n=n.concat(o(e.cssRules[t].styleSheet)))}catch(e){}return n}t.handleCssHashList=function(i,r,s){var a,c,l,u,p,f,d,h=r||e,I=h.createElement("a"),g=[],m=function(e){var t,n=e.styleSheets,i=[];for(t=0;t<n.length;t++)i=i.concat(o(n[t]));return i.filter(function(e,t){return i.indexOf(e)===t})}(h),y=[],C=[],A={},_=s||function(e){return e.hash};for(g.push(t.params.domain),g=g.concat(t.params.aliases),a=0;a<m.length;a++)I.href=m[a],p=-1===g.indexOf(I.hostname)?m[a]:m[a].replace(I.origin,""),(c=t.cache.load(p))?"null"!==c&&C.push(c):-1===g.indexOf(I.hostname)?(A.name=I.pathname.replace(/^.*\/|\.[^.]*$/g,""),A.path=I.hostname+"/"+I.pathname.replace(/^\//,""),A.hash=A.name+"-"+n(A.path).toString(16)+"-0",-1===C.indexOf(A.hash)&&(C.push(_(A)),t.cache.save(p,A.hash))):-1===y.indexOf(m[a])&&y.push(m[a].replace(I.origin,""));if(0===y.length)i(C);else for(u=t.delayTrigger(y.length,i,[C]),l=function(e,o){var i={};I.href=e,i.path=t.params.domain+"/"+I.pathname.replace(/^\//,""),i.name=I.pathname.replace(/^.*\/|\.[^.]*$/g,""),i.hash=i.name+"-"+n(i.path).toString(16)+"-"+n(o).toString(16),i.content=o,C.push(_(i)),t.cache.save(e,i.hash)},d=function(e){return function(n){t.cache.save(e,"null")}},f=function(e){return function(t){l(e,t)}},a=0;a<y.length;a++)t.request(y[a],{},{onsuccess:f(y[a]),onfailure:d(y[a]),oncomplete:u})}}(document,FACIL_ITI),function(e){"use strict";e.delayTrigger=function(e,t,n){return function(){0==--e&&t.apply(null,n)}}}(FACIL_ITI),function(e,t,n){"use strict";n.INCONTENT_MANAGER={},function(o){o.inContent=null,o.context=()=>({tag:"ws",id:"incontent-context",width:e.innerWidth,height:e.innerHeight,lang:t.documentElement.lang,isDesktopView:!1,isMobileView:!1,applicationIdentifier:n.params.userId||null,version:n.params.uiVersion||"default"});const i="https://www.facil-iti.app",r={css:{height:"100%",width:"100%"},stylesheet:""};o.applyLayout=function(){const e=t.querySelector("#FACIL_ITI_INCONTENT");for(const[t,n]of Object.entries(r.css))e.style[t]=n},o.applyConfiguration=()=>{t.querySelector("#FACIL_ITI_INCONTENT").contentWindow.postMessage(o.context(),"*")},o.open=function(n){let r;(r=t.createElement("iframe")).src=i+"?mode=incontent&applicationIdentifier="+o.context().applicationIdentifier+"&version="+o.context().version,r.id="FACIL_ITI_INCONTENT",o.inContent=r;const s=t.querySelector(n);s&&(s.appendChild(r),r.onload=o.applyConfiguration,o.applyLayout(),e.onresize=()=>{o.applyLayout(),o.applyConfiguration()})}}(n.INCONTENT_MANAGER)}(window,document,FACIL_ITI),function(e,t,n){n.POPIN_MANAGER={proxy:null,wsDomain:null},function(o){"use strict";const i="https://www.facil-iti.app";function r(){return{app_url:i,features:"env_1",ui:{css:{height:o.context().height-60+"px",width:"420px",position:"fixed",borderRadius:"20px",top:"30px",border:"2px solid white"},position:"right",sideMargin:"30px",stylesheet:""}}}o.popin=null,o.context=()=>({tag:"ws",id:"popin-context",width:e.innerWidth,height:e.innerHeight,lang:t.documentElement.lang,isDesktopView:e.innerWidth>600,isMobileView:e.innerWidth<=600,applicationIdentifier:n.params.userId||null,version:n.params.uiVersion||"default"});const s={ui:{css:{height:"60vh",width:"100%",borderRadius:"20px 20px 0 0",bottom:"0px",position:"fixed",top:"auto",right:"0",left:"0",border:"none",borderTop:"2px solid white"},position:"left",sideMargin:"0"}};o.isPopinOpen=()=>null!==t.querySelector("#FACIL_ITI_POPIN"),o.toggle=e=>{o.isPopinOpen()?o.close():o.open(e)},o.getMaxZIndexInUse=()=>[...t.querySelectorAll("body *")].map(e=>parseInt(getComputedStyle(e).zIndex)).filter(e=>!isNaN(e)).reduce((e,t)=>Math.max(e,t),1),o.applyLayout=function(){const e=t.querySelector("#FACIL_ITI_POPIN");if(e){const t=o.context().isDesktopView?r():Object.assign({},r(),s);for(const[n,o]of Object.entries(t.ui.css))e.style[n]=o;"right"===t.ui.position?(e.style.right=t.ui.sideMargin,e.style.left="auto"):(e.style.left=t.ui.sideMargin,e.style.right="auto")}},o.applyConfiguration=()=>{t.querySelector("#FACIL_ITI_POPIN").contentWindow.postMessage(o.context(),"*")},o.open=function(){let n;o.popin?n=o.popin:((n=t.createElement("iframe")).src=r().app_url+"?mode=popin&applicationIdentifier="+o.context().applicationIdentifier+"&version="+o.context().version,n.id="FACIL_ITI_POPIN",n.style.zIndex=o.getMaxZIndexInUse()+1,o.popin=n),t.body.appendChild(n),n.onload=o.applyConfiguration,o.applyLayout(),e.onresize=()=>{o.applyLayout(),o.applyConfiguration()}},o.close=function(){t.querySelector("#FACIL_ITI_POPIN").remove()},o.switchPosition=function(){const e=t.querySelector("#FACIL_ITI_POPIN").style;e.right===r().ui.sideMargin?(e.right="auto",e.left=r().ui.sideMargin):(e.left="auto",e.right=r().ui.sideMargin)},o.resizeWindow=function(){const e=t.querySelector("#FACIL_ITI_POPIN").style;e.height===s.ui.css.height?e.height="100%":e.height=s.ui.css.height},o.initialize=function(){a()},o.openOnSelectorClick=e=>{const n=t.querySelectorAll(e);n&&n.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),o.toggle()},!1)})},o.clearAllDataInStorage=function(){try{e.localStorage.setItem("FACIL_ITI",""),e.localStorage.removeItem("FACIL_ITI"),e.sessionStorage.setItem("FACIL-ITI_CSS",""),e.sessionStorage.setItem("FACIL-ITI_url_blacklist",""),e.sessionStorage.setItem("FACIL_ITI_CACHE",""),e.sessionStorage.removeItem("FACIL-ITI_CSS"),e.sessionStorage.removeItem("FACIL-ITI_url_blacklist"),e.sessionStorage.removeItem("FACIL_ITI_CACHE"),o.proxy.postMessage(n.compat.jsonStringify({subject:"delete-all-user-data-from-storage",content:null}),o.wsDomain)}catch(e){}};let a=()=>{e.addEventListener("message",e=>{if([i,"https://cdn.facil-iti.app"].includes(e.origin))switch(e.data.popinAction){case"switch-position":o.switchPosition();break;case"resize":o.resizeWindow();break;case"close":o.close();break;case"delete-all-user-data-from-storage":o.clearAllDataInStorage()}})};o.initialize()}(n.POPIN_MANAGER)}(window,document,FACIL_ITI),function(e,t){"use strict";var n=function(){var t,n;if(e.XMLHttpRequest)return new XMLHttpRequest;if(void 0!==e.ActiveXObject)for(t in n=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0"])if(n.hasOwnProperty(t))try{return new ActiveXObject(n[t])}catch(e){}return null};t.request=function(e,t,o){var i,r=[],s=n();if(null!==s){if(o.onfailure&&"function"==typeof o.onfailure&&(s.onerror=o.onfailure),s.onreadystatechange=function(){4===s.readyState&&(200===s.status&&o.onsuccess&&"function"==typeof o.onsuccess?o.onsuccess(s.responseText):o.onfailure&&"function"==typeof o.onfailure&&o.onfailure(s.responseText),o.oncomplete&&"function"==typeof o.oncomplete&&o.oncomplete(s.status))},t&&t.length>0){for(i in t)t.hasOwnProperty(i)&&r.push(i+"="+encodeURIComponent(t[i]));e=e+"?"+r.join("&")}s.open("GET",e,!0),s.send()}}}(window,FACIL_ITI),function(e,t,n){"use strict";var o,i=n.compat.selectAll,r=n.compat.select,s=n.compat.jsonParse,a=n.compat.jsonStringify,c=n.compat.setAttributesList,l={},u={wsDomain:null,wsIntegration:"https://localhost:8050",userId:null,userConfig:null,language:null,domain:null,aliases:[],display_mode_popin:!0,display_mode_incontent:!0},p="blue",f="green";function d(){var e,n,o,s;if(!u.wsDomain)if(s=t.createElement("a"),n=r("#FACIL_ITI-script"))s.href=n.src,u.wsDomain=s.protocol+"//"+s.hostname;else for(o=i("script"),e=0;o.length;e++)if((n=o[e])&&-1!==n.src.indexOf("faciliti-tag.min.js")){s.href=n.src,u.wsDomain=s.protocol+"//"+s.hostname;break}return u.wsDomain}function h(){l.html=t.documentElement,l.head=t.head||r("head"),l.body=t.body}function I(e){var n,o=r("#FACIL_ITI-style");if(null!==o&&o.parentElement.removeChild(o),e){(n=t.createElement("style")).setAttribute("id","FACIL_ITI-style"),l.head.appendChild(n);try{n.innerHTML=e}catch(t){n.styleSheet.cssText=e}}}function g(t){try{e.localStorage.setItem("FACIL_ITI",t)}catch(e){}}function m(e){if(e)for(var t=0;t<e.length;t++)if(RegExp(e[t],"gi").test(location.pathname))return!0;return!1}function y(e){var o,i,h,g,y,C;try{for(o in u.userConfig=s(e),n.reset)if(n.reset.hasOwnProperty(o)&&"extend"!==o&&u.cacheFunc.indexOf(o)>-1)try{n.reset[o]()}catch(e){}if(u.userConfig.url_blacklist&&(n.cache.save("url_blacklist",a(u.userConfig.url_blacklist)),m(u.userConfig.url_blacklist)))return!1;u.userConfig.stylesheets&&u.userConfig.stylesheets.length&&function(e){var n;e&&(console.log("FACIL’iti REFRESH "+f+" to "+p),e.forEach(function(e){var o=u.wsIntegration+e;(n=t.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("class","FACILITI-stylesheet "+p),n.setAttribute("href",o),l.head.appendChild(n)}),t.querySelectorAll("link.FACILITI-stylesheet."+f).forEach(function(e){e.remove()}),[p,f]=[f,p])}(u.userConfig.stylesheets),u.userConfig.features&&(l.html.dataset.faciliti=u.userConfig.features.join(" ")),u.cacheFunc=[],g=u.userConfig.js||[],h="",u.userConfig.css&&u.userConfig.css.forEach(function(e){(0===e.filters.length||function(e){var t,n=location.pathname+location.search;for(t=0;t<e.length;t++)if(new RegExp(e[t]).test(n))return!0;return!1}(e.filters))&&(h+=e.content)}),h=h.replace(/#FACIL_ITI_DOMAIN#/g,d()),n.cache.save("CSS",h),I(h),g.length&&((y=r("#FACIL_ITI-engine"))&&l.head.removeChild(y),i=t.createElement("script"),C={id:"FACIL_ITI-engine",crossorigin:"anonymous",src:d()+"/"+u.userConfig.engine},u.userConfig.engine_integrity&&(C.integrity=u.userConfig.engine_integrity),c(i,C),l.head.appendChild(i))}catch(e){}}function C(e){u.domain=e.domain,u.aliases=e.aliases}function A(e){n.params.language=e}function _(e){n.handleCssHashList(function(e){S({subject:"response-css-hashes",content:e})})}function S(e){o&&e.subject&&o.postMessage(a(e),d())}function v(e){var t,n;if(e.origin!==d())return!1;try{n=s(e.data)}catch(e){return!1}t={"configure-domain-aliases":C,"request-css-hashes":_,"configure-language":A,"run-engine":y,"cookie-migration":g},n.subject in t&&t[n.subject](n.content)}function T(){h(),n.cache.load("url_blacklist")&&m(s(n.cache.load("url_blacklist")))?I(null):I(n.cache.load("CSS"));var i=function(){var i,s,a;if(h(),n.data)for(i=0;i<n.data.length;i++)u[n.data[i][0]]=n.data[i][1];if(n.data=null,!u.userId)return!1;n.compat.addEvent(e,"message",v),a={subject:"initialisation",content:{id:u.userId,origin:{domain:t.location.hostname,protocol:t.location.protocol,url_call:t.location.origin}}},null!==(s=r("#FACIL_ITI-proxy"))&&s.parentElement.removeChild(s),(s=t.createElement("iframe")).style.display="none",c(s,{id:"FACIL_ITI-proxy",src:d()+"/tag/proxy/?id="+u.userId+"&d="+btoa(encodeURIComponent(a.content.origin.domain)),title:"Solution d’accessibilité FACIL’iti",role:"presentation","aria-hidden":"true",width:"10",height:"10"}),s.onload=function(){o=s.contentWindow||s,n.POPIN_MANAGER.proxy=o,S(a)},l.body.appendChild(s),u.display_mode_popin&&(n.POPIN_MANAGER.wsDomain=d(),n.POPIN_MANAGER.openOnSelectorClick("[data-faciliti-popin]")),u.display_mode_incontent&&n.INCONTENT_MANAGER.open("[data-faciliti-incontent]")};"complete"===t.readyState?i():n.compat.addEvent(e,"load",i)}function L(e,t){this[e]=this[e]||t}try{n.compat.check()&&(n.page=l,n.reload=T,n.params=u,n.customParams={},n.reset={extend:L},n.utilities={extend:L},n.modules={extend:L},T())}catch(e){}}(window,document,FACIL_ITI);